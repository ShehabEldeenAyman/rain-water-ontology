@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix ex:   <http://example.org#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .

# Reference to the ontology file
ex:ShapeOntology
    a owl:Ontology ;
    owl:imports <https://shehabeldeenayman.github.io/rain_water_ontology.ttl> .


###########################################################
# Shape for Storage class
ex:StorageShape
    a sh:NodeShape ;
    sh:targetClass ex:Storage ;
    sh:property [
        sh:path ex:Has ;
        sh:class ex:StorageTank ;
        sh:minCount 1 ;
        sh:message "At least one StorageTank is required for each Storage instance." ;
    ] .

# Shape for StorageTank class
ex:StorageTankShape
    a sh:NodeShape ;
    sh:targetClass ex:StorageTank ;
    sh:property [
        sh:path ex:Has ;
        sh:class ex:OverflowMechanism ;
        sh:minCount 1 ;
        sh:message "At least one OverflowMechanism is required for each StorageTank instance." ;
    ] .
###########################################################
# Shape to enforce the structure of Reuse instances
ex:ReuseShape a sh:NodeShape ;
    sh:targetClass ex:Reuse ;
    
    # Constraint for at least one NonPottable designation
    sh:property [
        sh:path ex:DesignatedFor ;
        sh:class ex:NonPottable ;
        sh:minCount 1 ;
        sh:message "Each Reuse instance must be designated for at least one NonPottable use."
    ] ;
    
    # Constraint for at least one Irrigation use
    sh:property [
        sh:path ex:UsedFor ;
        sh:class ex:Irrigation ;
        sh:minCount 1 ;
        sh:message "Each Reuse instance must be used for at least one Irrigation purpose."
    ] .
###########################################################
# Shape to enforce the structure of Collection instances
ex:CollectionShape a sh:NodeShape ;
    sh:targetClass ex:Collection ;
    
    # Constraint for at least one CatchmentArea
    sh:property [
        sh:path ex:InstalledOn ;
        sh:class ex:CatchmentArea ;
        sh:minCount 1 ;
        sh:message "Each Collection instance must be installed on at least one CatchmentArea."
    ] ;
    
    # Constraint for at least one collection method
    sh:property [
        sh:path ex:CollectedBy ;
        sh:or ( 
            [ sh:class ex:RainBarrel ] 
            [ sh:class ex:Gutter ] 
            [ sh:class ex:Downspout ]
        ) ;
        sh:minCount 1 ;
        sh:message "Each Collection instance must be collected by at least one of RainBarrel, Gutter, or Downspout."
    ] .
###########################################################


