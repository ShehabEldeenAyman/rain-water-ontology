@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix ex:   <http://example.org#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .

# Reference to the ontology file
ex:ShapeOntology
    a owl:Ontology ;
    owl:imports <https://shehabeldeenayman.github.io/rain_water_ontology.ttl> .

# Shape to enforce at least one instance of each class exists
ex:ExistenceShape
    a sh:NodeShape ;
    sh:targetNode ex:Storage, ex:StorageTank, ex:OverflowMechanism, ex:Reuse, ex:Irrigation,
    ex:NonPottable, ex:Collection, ex:CatchmentArea, ex:Collection, ex:RainBarrel, ex:Gutter,
    ex:Downspout, ex:Treatment, ex:Sedimentation, ex:DisinfectionSystem, ex:FiltrationSystem,
    ex:SedimentationTank, ex:Monitoring, ex:WaterQualitySensor, ex:Sampling, ex:Salinity,
    ex:Temperature, ex:Transparency, ex:DissolvedOxygen, ex:Ammonium, ex:NitrateNitrite,
    ex:TotalNitrogen, ex:Phosphate, ex:TotalPhosphorus, ex:DissolvedSilica, ex:TotalOrganicCarbon,
    ex:ParticulateOrganicCarbon, ex:Distribution, ex:DistributionPipe, ex:PumpSystem, ex:ControlValve;
    sh:minCount 1 ;
    sh:message "At least one instance must exist in the data." .

# Shape for Storage class
ex:StorageShape
    a sh:NodeShape ;
    sh:targetClass ex:Storage ;
    sh:property [
        sh:path ex:Has ;
        sh:class ex:StorageTank ;
        sh:minCount 1 ;
        sh:message "At least one StorageTank is required for each Storage instance." ;
    ] .

# Shape for StorageTank class
ex:StorageTankShape
    a sh:NodeShape ;
    sh:targetClass ex:StorageTank ;
    sh:property [
        sh:path ex:Has ;
        sh:class ex:OverflowMechanism ;
        sh:minCount 1 ;
        sh:message "At least one OverflowMechanism is required for each StorageTank instance." ;
    ] .


